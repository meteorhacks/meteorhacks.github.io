<!DOCTYPE html>
<html lang='en'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Iron Router Support | Fast Render</title>
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link href="/pro-meteor/rss.xml" rel="alternate" type="application/rss+xml" title="Pro Meteor - A Guide to Build Production Quality Meteor Setup" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script type="text/javascript" src='/js/jquery.min.js'></script>
<script type="text/javascript" src='/js/bootstrap.min.js'></script>
<script type="text/javascript" src="//use.typekit.net/nok3jzz.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript" src="https://gumroad.com/js/gumroad.js">
</script>

<!-- Highlight JS -->
<link rel="stylesheet" href="/vendor/highlight/styles/zenburn.css">
<script type="text/javascript" src='/vendor/highlight/highlight.pack.js'></script>
<script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <!-- Header Area -->
  <header class="navbar navbar-default" role="banner">
  <div class='container'>
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".mh-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" id='mh-navbar-brand-title' href="/">MeteorHacks</a>
      
        <a class="navbar-brand" id='mh-navbar-brand-sub-title' href="/fast-render">| Fast Render </a>
      
    </div>
    <nav class='collapse navbar-collapse mh-navbar-collapse clearfix' role='navigation'>
      <ul class="nav navbar-nav pull-right">
        <li><a href="https://bulletproofmeteor.com/?utm_source=meteorhacks&utm_medium=link&utm_term=meteorhacks&utm_content=homepage&utm_campaign=meteorhacks">BulletProof Meteor</a></li>
        
            <li><a href="/pro-meteor">Pro Meteor</a></li>
        
            <li><a href="/fast-render">Fast Render</a></li>
        
            <li><a href="/meteor-weekly">Meteor Weekly</a></li>
        
      </ul>
    </nav>
  </div>
</header>

  <div class='container' style='max-width:1000px'>
    <!-- For Desktop View -->
    <div class='row'>
      <div class='col-xs-4 hidden-xs pull-right' id='blog-sidebar' style='margin-top: 106px'>
        <div id='blog-sidebar-items'>
          
          
  <!-- Desktop NavBar -->
  
    <h3>Content</h3>
    <ul>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='/fast-render/'>Introduction</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='/fast-render/usage'>Usage</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post selected'}>
        <a href='/fast-render/iron-router-support'>Iron Router Support</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='/fast-render/best-practices'>Best Practices</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='/fast-render/security-measures'>Security Measures</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='/fast-render/api'>API</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='https://github.com/arunoda/meteor-fast-render'>Github Repo</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='https://github.com/arunoda/meteor-fast-render/issues'>Issues</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='http://mad.ly/signups/98366/join'>Subscribe for Updates</a>
      </li>
    
    </ul>
  
    <h3>Tutorials & Articles</h3>
    <ul>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='/fast-render/how-loading-time-affects-your-bottom-line'>How Loading Time Affects Your Bottom Line</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='http://meteorhacks.com/fast-render-internals-and-how-it-works.html'>Fast Render Internals and How It Works</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='http://meteorhacks.com/how-to-test-fast-render-working-or-not.html'>How to Test whether Fast Render is Working or Not</a>
      </li>
    
      <!-- Checking for the selected -->
      
      

      <!-- Checking for the http urls -->
      
      

      <li class='post '}>
        <a href='http://meteorhacks.com/integrating-iron-router-based-apps-with-fast-render.html'>Integrating Iron Router Based Apps with Fast Render</a>
      </li>
    
    </ul>
  

        </div>
      </div>
      <div class='col-xs-8 hidden-xs' id='blog-page'>
        <h1>Iron Router Support</h1>
        <div id='blog-content' class='blog-seperator'>
          <p>FastRender has been deeply intergrated into IronRouter and with some few changes you can add FastRender support very easily. There are several ways to integrate depending on how you are using IronRouter.</p>

<h2 id="option-1-if-you-are-using-waiton">Option 1: If you are using waitOn</h2>

<p>If you are using waitOn functionality, you can add FastRender support very easily. Follow the steps shown below:</p>

<ul>
  <li>Make your route definition files accessible to both the server and the client</li>
  <li>If you are extending <code class="highlighter-rouge">RouteController</code>, add a new field called <code class="highlighter-rouge">fastRender</code> with <code class="highlighter-rouge">true</code> as the value</li>
</ul>

<p>See how it’s looks like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>PostsListController = RouteController.extend({
  fastRender: true,
  template: 'myTmpl',
  ...
})
</code></pre>
</div>

<ul>
  <li>If you are directly using <code class="highlighter-rouge">this.route</code>, add <code class="highlighter-rouge">fastRender: true</code> option.</li>
</ul>

<p>See how it’s looks like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>this.route('post_edit', {
  path: '/posts/:_id/edit',
  waitOn: function () {
    return Meteor.subscribe('singlePost', this.params._id);
  },
  fastRender: true
});
</code></pre>
</div>

<ul>
  <li>Make sure your <code class="highlighter-rouge">waitOn</code> function doesn’t have any client specific code or guard them with <code class="highlighter-rouge">Meteor.isClient</code>.</li>
</ul>

<h2 id="option-2-if-you-are-not-using-waiton">Option 2: If you are not using waitOn</h2>

<p>If you are using <code class="highlighter-rouge">wait</code> functionality on a <code class="highlighter-rouge">before</code> handler or you are not comfortable with exposing route definitions into server side, use this option.</p>

<p>Create FastRender routes identical to the IronRouter routes and subscribe accordingly with <code class="highlighter-rouge">this.subscribe</code> as shown below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FastRender.route('/blog/:slug', function(params) {
  this.subscribe('blogPost', params.slug);
  this.subscribe('blogAuthor', params.slug);
})
</code></pre>
</div>

<p>If your <code class="highlighter-rouge">blogAuthor</code> subscription accepts the <code class="highlighter-rouge">_id</code> of the author instead of the <code class="highlighter-rouge">slug</code>. You can use something like following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FastRender.route('/blog/:slug', function(params) {
  this.subscribe('blogPost', params.slug);

  //assuming, PostCollection is the Meteor Collection for your blog posts
  var authorId = PostCollection.findOne({slug: params.slug}).authorId;
  this.subscribe('blogAuthor', authorId);
})
</code></pre>
</div>

<h2 id="option-3-using-fastrender-with-much-control">Option 3: Using FastRender with much Control</h2>

<p>Let’s say your IronRouter route <code class="highlighter-rouge">/blog/:slug</code> is waiting on <code class="highlighter-rouge">blog</code> and <code class="highlighter-rouge">authors</code> subscriptions. This case you are loading all the blogs and authors in to the page. If you’ve few number of blogs and authors this is not bad. But it is not good to load all these data with FastRender, because it might slow down the initial HTML loading.</p>

<p>In this case, you can only load data for the current blog post and trick IronRouter with saying subscription is completed even before it completed. You can try something like below: (in the service side)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FastRender.route('/blog/:slug', function(params) {
  //assuming, PostCollection is the Meteor Collection for your blog posts
  this.find(PostCollection, {slug: params.slug});
  //now we are forcling Meteor client to say it has successfully loaded the blog subscription
  this.completeSubscriptions(['blog']);

  //there are only few authors, loading all of them is not a bad idea
  this.subscribe('authors');
})
</code></pre>
</div>

<blockquote>
  <p><a href="/fast-render/api/#thiscompletesubscriptionssubscriptionlist"><code class="highlighter-rouge">this.completeSubscriptions()</code></a> can also be used without IronRouter. It might help if you’ve implemented some custom loading indicator.</p>
</blockquote>

        </div>
      </div>
    </div>

    <!-- For Mobile View -->
    <div class='row blog-xs'>
      <div class='col-xs-12 visible-xs' id='blog-page'>
        
        
        
  <!-- Mobile NavBar -->
  <select style='width: 100%' onchange="if (this.value) window.location.href=this.value">
    <option>Navigation</option>
    
      <optgroup label='Content'>
      
        <option value='/fast-render/'>Introduction</option>
      
        <option value='/fast-render/usage'>Usage</option>
      
        <option value='/fast-render/iron-router-support'>Iron Router Support</option>
      
        <option value='/fast-render/best-practices'>Best Practices</option>
      
        <option value='/fast-render/security-measures'>Security Measures</option>
      
        <option value='/fast-render/api'>API</option>
      
        <option value='/fast-render/https://github.com/arunoda/meteor-fast-render'>Github Repo</option>
      
        <option value='/fast-render/https://github.com/arunoda/meteor-fast-render/issues'>Issues</option>
      
        <option value='/fast-render/http://mad.ly/signups/98366/join'>Subscribe for Updates</option>
      
      </optgroup>
    
      <optgroup label='Tutorials & Articles'>
      
        <option value='/fast-render/how-loading-time-affects-your-bottom-line'>How Loading Time Affects Your Bottom Line</option>
      
        <option value='/fast-render/http://meteorhacks.com/fast-render-internals-and-how-it-works.html'>Fast Render Internals and How It Works</option>
      
        <option value='/fast-render/http://meteorhacks.com/how-to-test-fast-render-working-or-not.html'>How to Test whether Fast Render is Working or Not</option>
      
        <option value='/fast-render/http://meteorhacks.com/integrating-iron-router-based-apps-with-fast-render.html'>Integrating Iron Router Based Apps with Fast Render</option>
      
      </optgroup>
    
  </select>

        <h1>Iron Router Support</h1>
        <div id='blog-content'>
          <p>FastRender has been deeply intergrated into IronRouter and with some few changes you can add FastRender support very easily. There are several ways to integrate depending on how you are using IronRouter.</p>

<h2 id="option-1-if-you-are-using-waiton">Option 1: If you are using waitOn</h2>

<p>If you are using waitOn functionality, you can add FastRender support very easily. Follow the steps shown below:</p>

<ul>
  <li>Make your route definition files accessible to both the server and the client</li>
  <li>If you are extending <code class="highlighter-rouge">RouteController</code>, add a new field called <code class="highlighter-rouge">fastRender</code> with <code class="highlighter-rouge">true</code> as the value</li>
</ul>

<p>See how it’s looks like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>PostsListController = RouteController.extend({
  fastRender: true,
  template: 'myTmpl',
  ...
})
</code></pre>
</div>

<ul>
  <li>If you are directly using <code class="highlighter-rouge">this.route</code>, add <code class="highlighter-rouge">fastRender: true</code> option.</li>
</ul>

<p>See how it’s looks like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>this.route('post_edit', {
  path: '/posts/:_id/edit',
  waitOn: function () {
    return Meteor.subscribe('singlePost', this.params._id);
  },
  fastRender: true
});
</code></pre>
</div>

<ul>
  <li>Make sure your <code class="highlighter-rouge">waitOn</code> function doesn’t have any client specific code or guard them with <code class="highlighter-rouge">Meteor.isClient</code>.</li>
</ul>

<h2 id="option-2-if-you-are-not-using-waiton">Option 2: If you are not using waitOn</h2>

<p>If you are using <code class="highlighter-rouge">wait</code> functionality on a <code class="highlighter-rouge">before</code> handler or you are not comfortable with exposing route definitions into server side, use this option.</p>

<p>Create FastRender routes identical to the IronRouter routes and subscribe accordingly with <code class="highlighter-rouge">this.subscribe</code> as shown below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FastRender.route('/blog/:slug', function(params) {
  this.subscribe('blogPost', params.slug);
  this.subscribe('blogAuthor', params.slug);
})
</code></pre>
</div>

<p>If your <code class="highlighter-rouge">blogAuthor</code> subscription accepts the <code class="highlighter-rouge">_id</code> of the author instead of the <code class="highlighter-rouge">slug</code>. You can use something like following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FastRender.route('/blog/:slug', function(params) {
  this.subscribe('blogPost', params.slug);

  //assuming, PostCollection is the Meteor Collection for your blog posts
  var authorId = PostCollection.findOne({slug: params.slug}).authorId;
  this.subscribe('blogAuthor', authorId);
})
</code></pre>
</div>

<h2 id="option-3-using-fastrender-with-much-control">Option 3: Using FastRender with much Control</h2>

<p>Let’s say your IronRouter route <code class="highlighter-rouge">/blog/:slug</code> is waiting on <code class="highlighter-rouge">blog</code> and <code class="highlighter-rouge">authors</code> subscriptions. This case you are loading all the blogs and authors in to the page. If you’ve few number of blogs and authors this is not bad. But it is not good to load all these data with FastRender, because it might slow down the initial HTML loading.</p>

<p>In this case, you can only load data for the current blog post and trick IronRouter with saying subscription is completed even before it completed. You can try something like below: (in the service side)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FastRender.route('/blog/:slug', function(params) {
  //assuming, PostCollection is the Meteor Collection for your blog posts
  this.find(PostCollection, {slug: params.slug});
  //now we are forcling Meteor client to say it has successfully loaded the blog subscription
  this.completeSubscriptions(['blog']);

  //there are only few authors, loading all of them is not a bad idea
  this.subscribe('authors');
})
</code></pre>
</div>

<blockquote>
  <p><a href="/fast-render/api/#thiscompletesubscriptionssubscriptionlist"><code class="highlighter-rouge">this.completeSubscriptions()</code></a> can also be used without IronRouter. It might help if you’ve implemented some custom loading indicator.</p>
</blockquote>

        </div>
      </div>
    </div>

  </div>

  <!-- Footer goes here -->
  <footer role='content-info' class='container'>
  MeteorHacks - 2014 
  
  <br>
  <small>
    MeteorHacks is an independent entity and has not been authorized, sponsored, or otherwise approved by Meteor Development Group.
  </small>
</footer>

  <!-- GA goes here -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41396877-1', 'meteorhacks.com');
  ga('send', 'pageview');

</script>
</body>
</html>